sonarqube {
  properties {
    // general stuff
    property 'sonar.projectName', 'OSMoGrid'
    property 'sonar.projectKey', 'edu.ie3:OSMoGrid'
    property 'sonar.verbose', 'false' // WARNING: There is the potential for this setting to expose sensitive information such as passwords if they are stored as server-side environment variables.
    property 'sonar.sourceEncoding', 'UTF-8' // encoding
    property 'sonar.sources', [
      'src/main/resources',
      'src/main/scala'] // src dirs
    property "sonar.tests", [
      'src/test/resources',
      'src/test/scala'] // test src dirs
    // reports stuff (for all languages)
    property 'sonar.junit.reportPaths', [
      'build/test-results/test'] // Comma-delimited list of paths to Surefire XML-format reports.
    // spotbugs report dir
    property "sonar.java.spotbugs.reportPaths", [
      "build/reports/spotbugs/main.xml",
      "build/reports/spotbugs/test.xml"] // Comma-delimited list of paths to reports from SpotBugs
    // java specific stuff
    property "sonar.java.pmd.reportPaths", [
      "build/reports/pmd/test.xml",
      "build/reports/pmd/main.xml"] // Comma-delimited list of paths to PMD Apex XML reports
    // exclusions
    property 'sonar.exclusions', [
      'docs/**',
      'src/main/scala/edu/ie3/osmogrid/cfg/OsmoGridConfig.scala'
    ]
  }
}

// forces sonarqube to execute integration tests
project.tasks["sonarqube"].dependsOn "check"
// Check itself depends on
// - pmdMain
// - spotBugsMain
// - pmdTest
// - spotBugsTest
// - test
